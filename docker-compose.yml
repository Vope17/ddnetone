version: '3.8'

services:
  app:
    build: .
    container_name: ddnet-app
    ports:
      - "8080:8080"
    env_file:
      - .env
    environment:
      - GIN_MODE=release
    
    # ★ 重點 3：讓 Linux 也能解析 host.docker.internal
    # (Windows/Mac 的 Docker Desktop 預設支援，加這行是為了相容 Linux)
    extra_hosts:

      - "host.docker.internal:host-gateway"

    restart: always
